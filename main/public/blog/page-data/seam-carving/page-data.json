{"componentChunkName":"component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js","path":"/seam-carving/","result":{"data":{"site":{"siteMetadata":{"title":"[errorcodes@DWS ~]$","social":[{"name":"Linkedin","url":"https://github.com/dwshuo"},{"name":"Github","url":"https://github.com/dwshuo"}]}},"blogPost":{"__typename":"MdxBlogPost","id":"18c41731-b505-5904-8eab-9695a32124dd","excerpt":"Ordinarily when a image is resized each pixel is treated equally, meaning everthing gets\nreduced or increased by the same amount. This leads…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Content aware image resizing (seam carving)\",\n  \"date\": \"2019-09-17\",\n  \"description\": \"Resize images while keeping main subject focused and undistorted\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Ordinarily when a image is resized each pixel is treated equally, meaning everthing gets\\nreduced or increased by the same amount. This leads to weird distortions to the subject of\\nthe image.\"), mdx(\"p\", null, \"For example the following is a image of a skier and a helicopter.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"500px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"53.91304347826087%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAACkUlEQVQozx3OS08TYRQG4G/m05agJiWCMSQudGXiRheujKJC753W1gIRAzQaCJgQ40YSbylqiBtEwNLO9N6RUmq5iBKKWAplBuhlaJsWuUw7HYsLEhf+BacmT87qvO85ADZ8gDdH4e0x2GiBTYKPSKMFbRpHm6xQaoNyHJERQEoIE8rtUCZwVEjtsNEO4C3L/9g4lAqsUG6T6PCTGkKkJKDCDRRusZo4Y3RI9E5E4URVLqh0oQoXFMg8oFIvxVE5DuUEKieAwg7V7uo77iqdVyQbrsXe1+hxEeYSYW6oEXhQgVrgRZUkqDyjcKAqJ6JynjI4JUZ7tRYXqWzn23Cj2dfz1tbxdOhsMwEwEsG8QOOFWhLqPkHtBKr2A1TpgmrPMaxSecLoOWdy1htHTrdYL/eSA+7wC0e4YzBY3zVV2/Pl4uP5+u5ZaAxA/STUB6A2CI5jXhTzQa0P6kioJ4F+AjVMoncDQBcQG8iazmBd99y1Z4tPcGp0mhn+nLr6fAm0hsTNIZFhGgCNr8oUErcH0dYA0hoA96Yq2oLI/ZCofeZC39eW4fUHeNw6xywnDhboPctcuu7hPNCEEO0MUL5Z7hyN9RG0aWztUv+i5NH8dfP3BvOy6l30lWvT7E8PvfYPdgwsJLjUbnkzz8fSXNf41pX+yI2XUUBvF9dShVWGXU2ygcjOyGzav5T7FttL5Hgmx2XKf/MuMtWryPOHu9wRe/hnlz/Ks7/jWY7eLoBoqrCSYIUZZYobWT6eK1HpIp3hqDRHZThm5xdzUN7M/aCS2UiiICxQGT758zC1U97K8CCaOFitXC5GkqyQpzIlKluiBZnSerq4xhRiSTaW5GPb3EqysLSxH6b3wvT+SpyNpYr/AKcbR8/0p/9cAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"snow original\",\n    \"title\": \"snow original\",\n    \"src\": \"/blog/static/66d8b256c87f8862a9c843fbd8e7d267/0b533/snow.png\",\n    \"srcSet\": [\"/blog/static/66d8b256c87f8862a9c843fbd8e7d267/e4d6b/snow.png 345w\", \"/blog/static/66d8b256c87f8862a9c843fbd8e7d267/0b533/snow.png 500w\"],\n    \"sizes\": \"(max-width: 500px) 100vw, 500px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, \"If we were to resize it so that its a square we would see heavy distortions around the main\\nsubjects of the image.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"270px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"100%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEj0lEQVQ4y02Sa0xTZxzGT89BnWaOLMbMQWKyZdMsITNZ9m1O5V6wciugIAJjyzAzG7qLW0RH3AZzycwmcm8rl1ZuCpsg90sLliKUArUUkHKdTuaXfVj2/dnznnZuH578z/ue9/39n/9zjiS/+xPkQ9Tha5DDSyFHlEGOpKLKoESJWs51JSsVU0VVQ6HkZ6pRpURTUTWQ5EOEHKaOXP8frFyVFFnBg5UE+EFyLGHaakgxBkjRRq4NlNEvsY7mvnyEgPCyAIyAqArCKrAlthLP66p4kQAeVNTLflBwkhEvJBohaQmJM0HW3qBYY00EhhMQUREYi06iq9TRhJOX0g0IOW7EDh0vx5hUJy+nVWFfjgE7Ek3QxBEUL1RLsIDWEhgRyCf6v7FkbY0qiYDtCSbs0psQoq/E3owaPtMlIVIcIUeF6tSqETW+nsBIAqID4cZScTXQCGC8EYqOF3lY0lnwYuzXeDO9iOOykbYeQccIENLVB2oDwWYCo8RXYj6BPDRUcKqRF0x+GPN7JbMakYUNOHXxOvT5hdiZxFwJCEqoh5JIUIKZshB6k8AY4zOYcvSGOs7uzDocyC/D/vTvsDf1e5y5YsHkrAsdQ1Zca2jB/g+bIKU3Q6NvhJR4E3ISxaokcF98GfUriWB1zEJXh63JtdidVYc96VV4LqUWoacsyCluRWZxO9765DakjFbs+6ILB853YdcH7ZCSG6EkNxHaTGBcnR8mQj3GPMQYSQ3QJJnV7poUjpHYiJBsC8LOtCE47zZe/+wucn604pvaceSVjiAouw2yvoVObxEowqQrOYGVeSgEySnMI5UjUDLHUlKbsS2N42S04I3Pu3C2fBRXW5yw9Hlg6phB2PkeSKm3EKRvE0AzgggKymqBJp2XUhoJo/3jzVBOtEDhePKJVkhprXi14C4yfxhG7lUrGnrd6Bl/iHarF2cNDp5rg6Ln+FIyR0ptRGhBJ0I/voOdzETJYk5ZtJ/NmtuG7fl38Nq5LiSXDOH90lGcrrCjacCDIdcyuh2LKGlyYsvJXyHpqbcZbti5Tmi/HUTuzzYklgxiD51sO92Bd4r6EfZVLw5e6kdhtR2fGiZw4UobLvOrD89swOFZw6R3HXV9cwj5qAdbszohddjmYe52qyM0DnrUmkcXBy/14UvDGIpqHTB1utE+8ADm8d9g072Hbu1JuP/4C17fY8ytbGJ+dRN9kyuwDM5Dsk+vwD6zgpHpZQw5l1S127yo7pxRQ+9xPIR76RFc3jUsPP0b0xcvYLK4AF4CF9c2sbj+FB7fEzjn1mF3+SANT/ow7PRhiNXKTIanfLARLhqMci2ajbtXMfFgFb6NPzG37IR76jLuz/jY6HfV3dTCY4x7NjBwn0CrMwCcEO4EjG5nVlWgVcCnlmFzsgGfx7jnmFqC1eHi3gK67IsYca3AtfBIBc8tPaHDCTrjmDZeEO4GCB4lcMztl312FffYZFQ0ouN7qtbURoM82zEyj1/46/QymvHZNToUI/OFjZ2EhEsrD4/x5Zh7jeP6JUZXof/Cp1ZoxO9+gP9jN932jy3iHxI73WWrf8PnAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"snow bad\",\n    \"title\": \"snow bad\",\n    \"src\": \"/blog/static/8a196166849801e77af62056e62efda8/01bf6/snow-bad.png\",\n    \"srcSet\": [\"/blog/static/8a196166849801e77af62056e62efda8/01bf6/snow-bad.png 270w\"],\n    \"sizes\": \"(max-width: 270px) 100vw, 270px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"h2\", {\n    \"id\": \"content-aware-image-resizing\"\n  }, \"Content-Aware Image Resizing\"), mdx(\"p\", null, \"In 2007 a paper titled \\u201CSeam Carving for Content-Aware Image Resizing\\u201D was published, which suggested\\nresizing along seams of low energy. A vertical seam is defined in this case as one pixel per row and\\neach pixel being 8-connected (pixels in adjacent rows differ by at most one column).\"), mdx(\"p\", null, \"Formally a vertical seam of a M rows by N columns can be defined as. Where \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"i\"), \" is the row and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"c(i)\"), \"\\nis the chosen column in each row.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"447px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"8.695652173913043%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAe0lEQVQI1x2OWw6DIAAEvf8VbQJo1SovRaAtmkwpf5vdyWS7nDPrupJSYts2jDH0fc9rmYm1895zxhNrHc65xuzHwVUKRms+30IMB9pYck50f0gI0URKqZYfVaikoFx3FS+EENo+TU+klFWq64HIOAyk/CbsnnGasZX5AblZlnLxmALQAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"seam def\",\n    \"title\": \"seam def\",\n    \"src\": \"/blog/static/f5694098d45d511d1932d407d599d5f4/a2d48/seam-def.png\",\n    \"srcSet\": [\"/blog/static/f5694098d45d511d1932d407d599d5f4/e4d6b/seam-def.png 345w\", \"/blog/static/f5694098d45d511d1932d407d599d5f4/a2d48/seam-def.png 447w\"],\n    \"sizes\": \"(max-width: 447px) 100vw, 447px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, \"Once we have selected a seam, the pixels on the seam are then removed from the orginal image, and the rest\\nshifted over to fill in the blank spaces. This will then create a new M rows by N-1 columns image.\"), mdx(\"p\", null, \"Below is an example of a vertical seam.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"500px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"53.91304347826087%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAACoElEQVQozxXO3U9ScRwG8B/nh0fncNOlrblu6qrL2uqqlRbvLwcC0aYtdTWdXrjW2mrrbVjNdZOmibyDgCIiGllOzAQ5grwd3gYKwuF4wi7cuuhf6Lh99tx8nz37AtjxGXbOIHdnOZ2TbO4s5GlZXC3Cm0N4OsjXQ6GBJTACvpFJKDRBAcN8hm+CXBOAd7TwrK1r4k6z+XNQqG9WGDgyIyo2QpENiGz1UuN5tblZaWGJLIjECsVWRGSFDME8gDw95BvYAj2HN4sIjUBkglJb4z1bg8KOCqZasckWpQHFrChmgzLGPMKQMuyI2AmYZxCxpU5sahTqOCpLi9rUKDegEv2lPoNa4xj5oO9//ulCtxFgThZmBzI7lDuhYgHKFxGpCyBiK1tqg5idIzFxumwXBy3t6ulzPbqro85xm/+12d8/4WkfWm4d+XblyXr78FeodkPlElS6odwD6jA7gjkQuaNJZmYrnUC5iKiWkC43ULjrVc6WAU/bsO/my82nhvDMampqhbjxagvc99Z3e1HVKgAyR8OgF+1fQbsXUfUC6PWA3mXQ52E98KIP1y6Pfe+Z2ntkiOt8qe1EeSNS0voybY/XgczLkq8B8fvtgRl8zBgZ/IJff+ZrHl2/pfnZodmWfAy+tUY1rsynd66J/vGNBEUUa9ECjWeoobnYtRc7t98EQSRdDRHkbprcjRdXNtPTvoxrK/8DLyXydCpPZWv/ClYnMSoq0CdF6rRy8rdInxYqf+I5KpImQZAgA4lyIFUNJY5iyVKsQIcz1UiWCmeocJZKHfxOlWvR/K9wMreTIPdzdDhLJw9PiINaLEuDYKK8S5DBdDUQLYb2D8PMmVnNHUeyx3uZaihF4skKnqTxNBVIklv7R/5IyR85CsQrOFH9D5fQR6DT9p2hAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"snow seam\",\n    \"title\": \"snow seam\",\n    \"src\": \"/blog/static/690cfd57e0388d0befe42e048fcc4c17/0b533/snow_seam.png\",\n    \"srcSet\": [\"/blog/static/690cfd57e0388d0befe42e048fcc4c17/e4d6b/snow_seam.png 345w\", \"/blog/static/690cfd57e0388d0befe42e048fcc4c17/0b533/snow_seam.png 500w\"],\n    \"sizes\": \"(max-width: 500px) 100vw, 500px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"h2\", {\n    \"id\": \"selecting-seams\"\n  }, \"Selecting seams\"), mdx(\"p\", null, \"Now that we have a general understanding of what Content-Aware Image Resizing is, lets take a look at how\\nexactly these seams are selected.\"), mdx(\"p\", null, \"The seam we select to be removed, is the seam with the least energy. Energy is defined in our case\\nas the derivative magnitudes at each pixel.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"319px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"20.06269592476489%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAArUlEQVQY03WP2xKCMBBD+f9/0xdFijeQFhVk2gIiN8dj4c1R85JNMju78fiB5zhy2O8o64Z/KK1FhOGX7xmtOacXmqYhv+VUVUVRFKxXK6RSs7bWcM1yxqFzuqbve5LkhO/7ZFk2705c2hLvnKYEIkQpSepm6y5PYbDZEMcxSsqZpcuG7oE2lrZtnRchREAUnZBJwvEYobXB+1Vn+mAbCur7/8rWaJaLBc/Xp/8GrBExepX71ugAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"energy def\",\n    \"title\": \"energy def\",\n    \"src\": \"/blog/static/249e2c48231e25e239d2620b1e8d7a93/b53cf/energy.png\",\n    \"srcSet\": [\"/blog/static/249e2c48231e25e239d2620b1e8d7a93/b53cf/energy.png 319w\"],\n    \"sizes\": \"(max-width: 319px) 100vw, 319px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, \"Below is a python snippit that calculates image energy using the \", mdx(\"a\", {\n    href: \"https://en.wikipedia.org/wiki/Sobel_operator\",\n    target: \"_blank\"\n  }, \"Sobel kernel\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-python\"\n  }), \"def calc_energy(img):#function calculates image energy\\n    #calculate energy of image, first convert to greyscale then apply sobel\\n    gray_scale = cv2.cvtColor(img.astype(np.uint8), cv2.COLOR_BGR2GRAY)\\n    sobelx = cv2.Sobel(gray_scale,cv2.CV_64F,1,0,ksize=3)\\n    sobely = cv2.Sobel(gray_scale,cv2.CV_64F,0,1,ksize=3)\\n    img_energy = np.abs(sobelx) + np.abs(sobely)\\n    return img_energy\\n\")), mdx(\"p\", null, \"The optimal vertical seam to be removed is thus the seam which minimizes this energy.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"164px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"46.951219512195124%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABc0lEQVQoz41SXU/CQBDk//8CY0hIjC8++qBYNVoMFERCwVoKQhG4UgihUMAWaHsd7wqFUGPiJnsfmbvJ7OymQkphWVOYozFCAJv1GsvVCjzCMIwyjviezBjjkQoYoXBzjadnEY67BSEEDU2LwCAI9p/+JuNJGQdPfk6xp2h8KOh+9WCaJrRm86Awqew/keJLQbxH5vIKvreFLMvwgh1ISB+2bR8e2/aC2TPDdDLCgBiwF0v0+72oKl3X4W78Xck8LjJp6IPRrtSti+JrGWJOhCQVsPY8VEoFSPkXlGsNlEsSatU3tLoElUoF6fMzZO+Eo0LnewlVVeEHFDPLguOsYAxNKMo7Ou0W+mQIMhig89lEq62jq7dRl6tQmh2meg6NeT4aj4+Ear2K26yAUlGC8PAIf28X73jSy2inAVzXxXqz/YVHhPPphKkwIj/EXD4CKQ1PGkL31iSbE2OHseGLyczXWZcNg0Aqlk5mKzlrf81gfP4BYfisCScjg6oAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"optimal energy seam\",\n    \"title\": \"optimal energy seam\",\n    \"src\": \"/blog/static/d84d8ac5791c6d12a3064906adfcfb39/2001c/min-seam.png\",\n    \"srcSet\": [\"/blog/static/d84d8ac5791c6d12a3064906adfcfb39/2001c/min-seam.png 164w\"],\n    \"sizes\": \"(max-width: 164px) 100vw, 164px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, \"Given the exponential number of potential seams, a brute force solution is not desirable.\\nExamining the problem a bit further we can see that this is a classic dynamic programming problem,\\nwhich would allow use to solve for the minimal seam at linear time.\"), mdx(\"p\", null, \"This dynamic programming problem can be defined as the following, where \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"W[i,j]\"), \" is the seam cost\\nfunction at each pixel.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"770px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"9.565217391304346%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAcElEQVQI10WNSQ7EIAwE8/93BpEBxDJmALP1AJccrOqybPX1UQrOWgghwMywK/9SwpwTYwz03lFrPdzO/ObNc7fY9rSGS2sNoi+MMQjeQz4S9y2QUkaMESF4qFVKRPDOQcpn7en4Li+lIOcMv363/wHzQJok8+FvSgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"optimal energy seam\",\n    \"title\": \"optimal energy seam\",\n    \"src\": \"/blog/static/b0cd44f9cc6b10d4651508cbdf9a5055/f4b77/dyn-prog.png\",\n    \"srcSet\": [\"/blog/static/b0cd44f9cc6b10d4651508cbdf9a5055/e4d6b/dyn-prog.png 345w\", \"/blog/static/b0cd44f9cc6b10d4651508cbdf9a5055/1e043/dyn-prog.png 690w\", \"/blog/static/b0cd44f9cc6b10d4651508cbdf9a5055/f4b77/dyn-prog.png 770w\"],\n    \"sizes\": \"(max-width: 770px) 100vw, 770px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, \"Below is the dynamic programming code, note how we set energy of the left and right edges to 1 million,\\nthis is done to prevent the seams from going out of bounds.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-python\"\n  }), \"def min_helper(left,right,center):\\n    lrcMatrix = np.stack((left,right,center), axis = 0)\\n    return np.min(lrcMatrix,axis=0)\\n\\ndef cumulative_energy(img_energy):\\n    row, col = img_energy.shape[:2]\\n    cumulative_energy = np.zeros((row, col))\\n    cumulative_energy[0,:] = img_energy[0,:]\\n    #set leftmost and right most col to 1mill\\n    cumulative_energy[0,0] = 1e6 \\n    cumulative_energy[0,-1] = 1e6\\n    for i in range(1, row):\\n        cumulative_energy[i-1,0] = 1e6 #set leftmost and right most col to 1mill\\n        cumulative_energy[i-1,-1] = 1e6\\n        #split into left right and center left = cumulative_energy[i-1, :-2] right = cumulative_energy[i-1, 2:]\\n        center = cumulative_energy[i-1, 1:-1]\\n        mins = min_helper(left,right,center) #call min helper returns array of mins\\n        cumulative_energy[i,:] = img_energy[i,:] #set self energy value\\n        cumulative_energy[i,1:-1] = cumulative_energy[i,1:-1] + mins\\n        #set leftmost and right most col to 1mill\\n        cumulative_energy[i,0] = 1e6 \\n        cumulative_energy[i,-1] = 1e6\\n    return cumulative_energy\\n\")), mdx(\"p\", null, \"Once we have calculated \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"W\"), \", we need to back trace to find the actual path of the seam. To do this\\nwe first find the column in the last row with the minimum cost, this becomes our end point of the seam.\\nFrom this point we trace back one row at a time picking the minumum value all the way to the top.\"), mdx(\"p\", null, \"This is defiend by the following.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"694px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"15.652173913043477%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAf0lEQVQI141Oyw7DIAzj//8QceDGKq0QKO9JzEuQ2vMiOVYcx4o6zzdyLmitwXsPYwxexwHnHGptICLM+cG/pb7cxugopXBARYxxh998lwTnnLHW2j7ZCcYY7CWklLauxDxZlEEO5EuiAK01rLXwIWwtMF9XegIFvfcN2QlE+wEvNuefgUbVrwAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"back trace\",\n    \"title\": \"back trace\",\n    \"src\": \"/blog/static/536d440a734546b83ee3646446876c56/31198/backtrk.png\",\n    \"srcSet\": [\"/blog/static/536d440a734546b83ee3646446876c56/e4d6b/backtrk.png 345w\", \"/blog/static/536d440a734546b83ee3646446876c56/1e043/backtrk.png 690w\", \"/blog/static/536d440a734546b83ee3646446876c56/31198/backtrk.png 694w\"],\n    \"sizes\": \"(max-width: 694px) 100vw, 694px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, \"The following is the python code snippit for seam back tracing.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-python\"\n  }), \"def seam_backtrace(cumlative_energy):\\n    row, col = cumlative_energy.shape[:2]\\n    seam = []\\n    prev_pos = 0\\n    for i in range(row-1, -1, -1):#need to iterate backwards to trace down path\\n        cur_row = cumlative_energy[i,:]#the row we are looking at currently\\n        if i == row -1: #if last row, then argmin is our starting point\\n            prev_pos = np.argmin(cur_row)\\n            seam.append([prev_pos, i])\\n        else:\\n            if(prev_pos - 1 < 0):\\n                left = 1e6\\n            else:\\n                left = cur_row[prev_pos - 1]\\n            if(prev_pos + 1 > col):\\n                right = 1e6\\n            else:\\n                right = cur_row[prev_pos + 1]\\n            middle = cur_row[prev_pos]\\n            prev_pos = prev_pos + np.argmin([left, middle, right]) - 1\\n            seam.append([prev_pos, i])\\n    #little clean up \\n    seam = np.asarray(seam)#set as np array\\n    seam = seam[::-1]#reverse the array\\n    return seam\\n\")), mdx(\"h2\", {\n    \"id\": \"results\"\n  }, \"Results\"), mdx(\"p\", null, \"The following are the results of seam carving resizing and simple resizing shown side by side.\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"733px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"53.623188405797094%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADCUlEQVQozyWQXUyTVxyHD606AZsQli2ZGr2ZN+xizu1iy4xLJqHQ8mFbOpcYL0025z4YZnOfWbbIsgguIlQKb2k7+dgGRAJDcLq2vL60pZ8UsCKDkoFK0QWSabbLZ4d68Vyc83/O7/zOEXcf/EN2/V+Wsxuo4STB2CyTyTT+iTgLKw9Z3fiP7MNHrK9tcPfvx6zJdWx6Hp8WRYtMo06mCATjZO6t53JEodFBgclJvqld0kG+WcnxlEmhsFJha81l9pWe5+0D7yIqFAzlDgpNbWyvcMq5i4IqV84vqOyUuBHisANDtZMdVe1sKd9EQV/hosjSQbFVQZi87HqjEcsLJxClCro3W9CXXcr5OmOHDFTYcUR6RtcTdMZ28kxutlZ55MBFsbmBfUebMFS2ojd7EDVd7Cm9gO3Fk7Khl23lbeTJprpKL08faWaX9Ud0Zjdb5Hm93BO7j3fwrO2iDLhA9efdNHYP8/0lL8Y6edDWIwN72VvWgm3/ewhzF9vMLp452k5xTTN1zf3UN3nRW3/KXayr7kIY7B6K7J1st7p57ng3ZWcGOPTZIAe/HOVYk5+dp0bYWebA/soHiOpe+RI3hrc85Fs7OXDqV16qH+T1r8YwfXedvNpf5B9auxG1P0vkwiax9LCnbox6JcTI+CyvfuOn6HAblpc/lE4feZbL0pPN7ZtuLyWnr9LUF6ffN8vek78hXpNNSk6PsPv9YfZ/KludV/n4Ey+Nig81tcShsxrP2zy8YzxDydd+Dn4xiuHEFekPYWzw89HZIdx9IaJzy9SeUxGjE3NcHEzgHJriWvAOkdtZNHsN4S6F26uPCMyucG0gQKKhheHkClf8M3zbE8E1lCSQXkNrdZIY6Gf+wWO0qSXEeGwBNbGAllwkmMowNbdKNKGihn4nNH2P+GKW6T/C3Drn4Eb6PmpsnuBUhpvSD88sk5xJMRENM5FaIZ5eRvgi8wQSi7n0m4kMgeifjMf/4kZkiVEtzdVIhtCIxswPrVy/dR/f5B3U5BNfjS8QiGXwSzZfNyb5H9/UOkndMsO0AAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"snow final\",\n    \"title\": \"snow final\",\n    \"src\": \"/blog/static/03ed3b0bca5938d0c95214fc84895814/00b70/snow-sbs.png\",\n    \"srcSet\": [\"/blog/static/03ed3b0bca5938d0c95214fc84895814/e4d6b/snow-sbs.png 345w\", \"/blog/static/03ed3b0bca5938d0c95214fc84895814/1e043/snow-sbs.png 690w\", \"/blog/static/03ed3b0bca5938d0c95214fc84895814/00b70/snow-sbs.png 733w\"],\n    \"sizes\": \"(max-width: 733px) 100vw, 733px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"733px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"53.333333333333336%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADAUlEQVQozx2S2U/TWRiG+0d4MReTeDfJxD9AL83EiFGhtEDLVrEuBFvAgBtSC7QECjMsmYiIQXHKQFugiyy1GhUthQJCNC5oDHHDGIgsYoVK+2t/j0euvpzve9/n/c7JUaxFYWk9TvjpG6afzzP76gPBmTneLkZY+QHLkQTf1zZY3oQ1cZ57t8jYzMttbejJG0Kzr5n/vM6q4HzZkFFkOyX07jj6/ijqrkVSexKk9Uiki6ruB33XGvYaH9pByPx/S2gl8p0RVN0RlA5QCq2qN4nGBTkDApjuSIhGHI0wq9ofkXJ9iVQnpAmRcgAKbq7Scs7DAbeY98T4pc90rHO44zkHe+Fwr0yaAKtdMpnbwL4kqr44qSKhIjCN3jWJUsCzBpJkia2KHKs0X/By8BZkuOIoXQm07iglvjDqvk3UIvQXKNsroxsSQI0vidYnkeEF88M5CvqnyRLmE/4ERfdFiG+FNrMH5W3I9sTJ8iaEMUbpyCyZ3tj2UxQMJzHcTVJyP4lC55c54pfIEwbTnXHyesPk3oGjgQTFQbAFvtBp8aAVcN2QRO6wjD6whdHzEO2IgAdkoZU5PZrEHJJQVIU2qAhGsYx9pb6hEktbB9aZBNbxb5SHJRruLeFu7MM0I4sbfKNyPEbdvffU/WPBGlzGMrlJxdgmJUHRfxxDMbUQYWIhyuj8Clf+LqfzWjNjn2WCH3/wQNRbs8s8uzbA5Ao8/vCV8U8x/OKrtDdd4O6LTzxaiBNa2GLknYTztQAeP3uMwrN5YrMmBn2dDA3eoNVhx/KvjerLtdi7/2PUasVsv8JRYwYVzbUMTkzj915lODxFY1cH1S1VtDm78U1ModDm7uZcWTrFBiUBXzvVVWWUlR7iTJmKP/b8RspfO2nb9zv7MnZSdHI/JUYlfk8rQ+52DEYd1SYNe1N28efuHaRrdqGoa66nsaWemtpKGurKOXIsH2PpKWosF8ktLESn0WDP0XCxxUZTq41am5nGhvNcMhlQ52gxmc9gOF1ManYOqvx8fgKasYOhhEvPwgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"lib final\",\n    \"title\": \"lib final\",\n    \"src\": \"/blog/static/53178d58dcc545ff4a18e9959836a155/00b70/lib-sbs.png\",\n    \"srcSet\": [\"/blog/static/53178d58dcc545ff4a18e9959836a155/e4d6b/lib-sbs.png 345w\", \"/blog/static/53178d58dcc545ff4a18e9959836a155/1e043/lib-sbs.png 690w\", \"/blog/static/53178d58dcc545ff4a18e9959836a155/00b70/lib-sbs.png 733w\"],\n    \"sizes\": \"(max-width: 733px) 100vw, 733px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")));\n}\n;\nMDXContent.isMDXComponent = true;","slug":"/seam-carving/","title":"Content aware image resizing (seam carving)","tags":[],"date":"September 17, 2019","image":null,"imageAlt":null,"socialImage":null},"previous":{"__typename":"MdxBlogPost","id":"adf9c919-d1ec-581b-9412-9e2aa87f0bf2","excerpt":"\nThis article is part of a series on the linux kernel. Today we will be looking at \nLinux system calls, and how you can implement your own…","slug":"/system-call/","title":"System calls","date":"October 29, 2018"},"next":null},"pageContext":{"id":"18c41731-b505-5904-8eab-9695a32124dd","previousId":"adf9c919-d1ec-581b-9412-9e2aa87f0bf2","maxWidth":1380}},"staticQueryHashes":["2744905544","3090755652","386998304","764694655"]}
<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/blog/styles.88329ee18ac2efa18c3e.css">:root{--reach-skip-nav:1}[data-reach-skip-nav-link]{border:0;clip:rect(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;overflow:hidden;position:absolute}[data-reach-skip-nav-link]:focus{padding:1rem;position:fixed;top:10px;left:10px;background:#fff;z-index:1;width:auto;height:auto;clip:auto}body,html{margin:0}#___gatsby{font-family:sans-serif;height:100%}#gatsby-focus-wrapper{height:100%;overflow:auto}.bm-item{display:inline-block;text-decoration:none;margin-bottom:10px;color:#d1d1d1;transition:color .2s}.bm-item:hover{color:#fff}.bm-burger-button{position:fixed;width:36px;height:30px;right:30px;top:30px}.bm-burger-bars{background:#373a47}.bm-cross-button{height:24px;width:24px}.bm-cross{background:#bdc3c7}.bm-menu{background:#1a1a1a;padding:2.5em 1.5em 0;font-size:1.15em}.Header__menu__item{width:100%;background:grey;border-radius:5px;border:1px solid transparent;padding:5px 5px 5px 10px;text-decoration:none;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-weight:600;font-size:95%;color:#fff;margin-bottom:15px;opacity:1;transition:all .2s ease-in-out}element.style{display:block}.menuTitle{color:#fff;font-weight:800;font-size:150%;background:none;padding:0;text-align:center;margin-bottom:20px}.bm-morph-shape{fill:#373a47}.bm-item-list{color:#b8b7ad;padding:.8em}.bm-overlay{background:rgba(0,0,0,.3)}</style><meta name="generator" content="Gatsby 2.24.87"/><title data-react-helmet="true">Image stitching (panoramic) | [errorcodes@DWS ~]$</title><meta data-react-helmet="true" name="description" content="In this blog we take look at a script I wrote which determines if images are taken of
the same scene, and if so stitch them together to…"/><meta data-react-helmet="true" property="og:title" content="Image stitching (panoramic)"/><meta data-react-helmet="true" property="og:description" content="In this blog we take look at a script I wrote which determines if images are taken of
the same scene, and if so stitch them together to…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:creator" content="David S. Wang"/><meta data-react-helmet="true" name="twitter:title" content="Image stitching (panoramic)"/><meta data-react-helmet="true" name="twitter:description" content="In this blog we take look at a script I wrote which determines if images are taken of
the same scene, and if so stitch them together to…"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><link as="script" rel="preload" href="/blog/component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js-8c8b83fd421af225f5d7.js"/><link as="script" rel="preload" href="/blog/commons-d5ea4e68f42cb2f584b0.js"/><link as="script" rel="preload" href="/blog/777cf710-b8339dbac930299739e2.js"/><link as="script" rel="preload" href="/blog/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/blog/app-4056aa1ba738a188367d.js"/><link as="script" rel="preload" href="/blog/framework-dbb498007a7447f28d8e.js"/><link as="script" rel="preload" href="/blog/webpack-runtime-65d049c7e0bfd164af7a.js"/><link as="fetch" rel="preload" href="/blog/page-data/image-stitching/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/sq/d/2744905544.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/sq/d/3090755652.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/sq/d/386998304.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/sq/d/764694655.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="15p9t3j">body{--theme-ui-colors-text:var(--theme-ui-colors-text,#282c35);--theme-ui-colors-background:var(--theme-ui-colors-background,#fff);--theme-ui-colors-primary:var(--theme-ui-colors-primary,#007acc);--theme-ui-colors-secondary:var(--theme-ui-colors-secondary,#1B1F23);--theme-ui-colors-muted:var(--theme-ui-colors-muted,hsla(0,0%,0%,0.2));--theme-ui-colors-highlight:var(--theme-ui-colors-highlight,rgba(255,229,100,0.2));--theme-ui-colors-heading:var(--theme-ui-colors-heading,#282c35);--theme-ui-colors-prism-background:var(--theme-ui-colors-prism-background,#011627);--theme-ui-colors-prism-comment:var(--theme-ui-colors-prism-comment,#809393);--theme-ui-colors-prism-string:var(--theme-ui-colors-prism-string,#addb67);--theme-ui-colors-prism-var:var(--theme-ui-colors-prism-var,#d6deeb);--theme-ui-colors-prism-number:var(--theme-ui-colors-prism-number,#f78c6c);--theme-ui-colors-prism-constant:var(--theme-ui-colors-prism-constant,#82aaff);--theme-ui-colors-prism-punctuation:var(--theme-ui-colors-prism-punctuation,#c792ea);--theme-ui-colors-prism-className:var(--theme-ui-colors-prism-className,#ffc98b);--theme-ui-colors-prism-tag:var(--theme-ui-colors-prism-tag,#ffa7c4);--theme-ui-colors-prism-boolean:var(--theme-ui-colors-prism-boolean,#ff5874);--theme-ui-colors-prism-property:var(--theme-ui-colors-prism-property,#80cbc4);--theme-ui-colors-prism-namespace:var(--theme-ui-colors-prism-namespace,#b2ccd6);--theme-ui-colors-prism-highlight:var(--theme-ui-colors-prism-highlight,hsla(207,95%,15%,1));color:var(--theme-ui-colors-text,#282c35);background-color:var(--theme-ui-colors-background,#fff);}body.theme-ui-dark{--theme-ui-colors-text:var(--theme-ui-colors-modes-dark-text,rgba(255,255,255,0.86));--theme-ui-colors-background:var(--theme-ui-colors-modes-dark-background,#232129);--theme-ui-colors-primary:var(--theme-ui-colors-modes-dark-primary,#D9BAE8);--theme-ui-colors-secondary:var(--theme-ui-colors-modes-dark-secondary,rgba(255,255,255,0.86));--theme-ui-colors-muted:var(--theme-ui-colors-modes-dark-muted,hsla(0,0%,100%,0.2));--theme-ui-colors-highlight:var(--theme-ui-colors-modes-dark-highlight,#663399);--theme-ui-colors-heading:var(--theme-ui-colors-modes-dark-heading,#fff);}</style><style data-emotion-css="8ir1vi">*{box-sizing:border-box;}body{margin:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="ocpejr">.css-ocpejr{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;}</style><div class="css-ocpejr"><div id="page-wrap"><div><div class="bm-overlay" style="position:fixed;z-index:1000;width:100%;height:100%;background:rgba(0, 0, 0, 0.3);opacity:0;-moz-transform:translate3d(100%, 0, 0);-ms-transform:translate3d(100%, 0, 0);-o-transform:translate3d(100%, 0, 0);-webkit-transform:translate3d(100%, 0, 0);transform:translate3d(100%, 0, 0);transition:opacity 0.3s, transform 0s 0.3s"></div><div><div class="bm-burger-button" style="z-index:1000"><button id="react-burger-menu-btn" style="position:absolute;left:0;top:0;z-index:1;width:100%;height:100%;margin:0;padding:0;border:none;font-size:0;background:transparent;cursor:pointer">Open Menu</button><span><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:0%;opacity:1"></span><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:40%;opacity:1"></span><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:80%;opacity:1"></span></span></div></div><div id="push" class="bm-menu-wrap" style="position:fixed;right:0;z-index:1100;width:300px;height:100%;-moz-transform:translate3d(100%, 0, 0);-ms-transform:translate3d(100%, 0, 0);-o-transform:translate3d(100%, 0, 0);-webkit-transform:translate3d(100%, 0, 0);transform:translate3d(100%, 0, 0);transition:all 0.5s" aria-hidden="true"><div class="bm-menu" style="height:100%;box-sizing:border-box;overflow:auto"><nav class="bm-item-list" style="height:100%"><a aria-current="page" class="bm-item bm-item Header__menu__item menuTitle" style="display:block" tabindex="0" href="/" tabindex="-1">DWS</a><a class="bm-item menu-item Header__menu__item" href="/" style="display:block" tabindex="-1"> Home </a><a class="bm-item menu-item Header__menu__item" href="/blog" style="display:block" tabindex="-1"> Blog </a><a class="bm-item menu-item Header__menu__item" href="/resume.pdf" style="display:block" tabindex="-1"> Resume </a><a class="bm-item menu-item Header__menu__item" href="https://github.com/DWShuo" style="display:block" tabindex="-1"> Github </a></nav></div><div><div class="bm-cross-button" style="position:absolute;width:24px;height:24px;right:8px;top:8px"><button id="react-burger-cross-btn" style="position:absolute;left:0;top:0;z-index:1;width:100%;height:100%;margin:0;padding:0;border:none;font-size:0;background:transparent;cursor:pointer" tabindex="-1">Close Menu</button><span style="position:absolute;top:6px;right:14px"><span class="bm-cross" style="position:absolute;width:3px;height:14px;transform:rotate(45deg)"></span><span class="bm-cross" style="position:absolute;width:3px;height:14px;transform:rotate(-45deg)"></span></span></div></div></div></div><header><style data-emotion-css="o7eq5i">.css-o7eq5i{color:var(--theme-ui-colors-primary,#007acc);}</style><a class="css-o7eq5i" href="#reach-skip-nav" data-reach-skip-link="" data-reach-skip-nav-link="">Skip to content</a><style data-emotion-css="1ufxd81">.css-1ufxd81{max-width:672px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:32px;}</style><div class="css-1ufxd81"><style data-emotion-css="4c94nt">.css-4c94nt{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:32px;}</style><div class="css-4c94nt"><style data-emotion-css="1qd1r5f">.css-1qd1r5f{margin-top:0;margin-bottom:0;}</style><p class="css-1qd1r5f"><style data-emotion-css="1febbns">.css-1febbns{box-shadow:none;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-primary,#007acc);}</style><style data-emotion-css="1a7e4c0">.css-1a7e4c0{color:var(--theme-ui-colors-primary,#007acc);box-shadow:none;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-primary,#007acc);}</style><a class="css-1a7e4c0" href="/blog/">[errorcodes@DWS ~]$</a></p></div></div></header></div><div id="reach-skip-nav" data-reach-skip-nav-content=""></div><div><style data-emotion-css="1in33uw">.css-1in33uw{max-width:672px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:32px;padding-bottom:32px;}</style><div class="css-1in33uw"><main><article><header><h1 class="css-0">Image stitching (panoramic)</h1><style data-emotion-css="1h1xv8c">.css-1h1xv8c{font-size:14px;margin-top:-16px;margin-bottom:16px;}</style><style data-emotion-css="dv5tmu">.css-dv5tmu{font-size:14px;margin-top:-16px;margin-bottom:16px;}.css-dv5tmu code{font-size:inherit;}</style><p class="css-dv5tmu">April 21, 2020</p></header><section><style data-emotion-css="1ek8oqb">.css-1ek8oqb code{font-size:inherit;}</style><p class="css-1ek8oqb">In this blog we take look at a script I wrote which determines if images are taken of
the same scene, and if so stitch them together to create a nice image montage/panoramic.</p><style data-emotion-css="h7w91b">.css-h7w91b{pointer-events:painted;}.css-h7w91b a{visibility:hidden;}.css-h7w91b:hover a{visibility:visible;}</style><h2 id="sift-keypoint-extraction" class="css-h7w91b"><style data-emotion-css="vvm4x1">.css-vvm4x1{margin-left:-20px;padding-right:4px;color:var(--theme-ui-colors-primary,#007acc);}</style><a href="#sift-keypoint-extraction" aria-label="SIFT Keypoint extraction" class="css-vvm4x1"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SIFT Keypoint extraction</h2><p class="css-1ek8oqb">For keypoint extraction I decided to go with SIFT(Scale-Invariant Feature Transform).
I found SIFT to be the easiest to understand and a great introduction to key point
extraction. There are of course alternatives such as SURF, BRISK and FREAK.</p><h3 id="scale-space-extrema-detection" class="css-h7w91b"><a href="#scale-space-extrema-detection" aria-label="Scale-space extrema detection" class="css-vvm4x1"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scale-space extrema detection</h3><p class="css-1ek8oqb">Extrema points are most likely key points, and to be scale invariant we must search
for stable points across multiple scales.</p><p class="css-1ek8oqb">To do this SIFT utilizes an image pyramid, where each level(octave) is derived
from applying some function to the image below.</p><p class="css-1ek8oqb">For example the following image shows a image pyramid which applies the mean function
at each level</p><p class="css-1ek8oqb"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:527px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:59.42028985507246%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAAB1ElEQVQoz31RTU/UUBR9gf9g/B9uXADR4MKdK1a6YOm/8A8YowmgO1wqsTrGzEaNuJGMDCChlDCdfkxJ29evmYF03uvr+yhe2kRlRE/am/a+e9855150fhWkZJKT5ptzTikpWKGUqi4DTfdVFYSh38lOvjUJSkicxMPRSAgxVYv+plWyLEnM2WlV/56Ox1mWJmkaRXEYBEGI4ziKY5wkyeXmSkHw9Zf7bxbx8UaTy7LMtu2+1XfdAcBxXT/wS8aKophmroCXjnlxJsq8UqLOKCmElLLxqWpcCFQK/Wm1mEQH2vzu+vXd9WtH7SVeMkjiMLQdx7Ys4DfN/nGv5zhO3zQxxkhKwUoGhFDnHbaM9pL1Zdn8eD9PfjS3EkLSJIkwHg2H4DYMwW0K3oVUaJLnQRhwLlnJQdxv/bUwpcT5v4GqZkj+dvvz8uanB/q7RaMFzx2jdcv4cI/m0S9TVzTDK0q69+rG16doa3Wmu4K2V1B3dWbrMfI6j+A08E8GAy8C3TiCVXmeB+tyXSefTC6arc2HnSdo78XszhrqrqGd57PfnyHj/d2arqqXUpQAmA1jlFKIhFDwiM7iw/3XN3Vt/kBbgFHr2oKuzelvb09GvVqv+o/nnw/6haXO+GZBAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image css-0" alt="mean pyramid" title="mean pyramid" src="/blog/static/5831da6164047df5f5a96a8ab512dea1/44385/mean-pyramid.png" srcSet="/blog/static/5831da6164047df5f5a96a8ab512dea1/e4d6b/mean-pyramid.png 345w,/blog/static/5831da6164047df5f5a96a8ab512dea1/44385/mean-pyramid.png 527w" sizes="(max-width: 527px) 100vw, 527px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
    </span></p><p class="css-1ek8oqb">For SIFT at each level we apply the Difference of Gaussian kernel which is a fast
approximation to scale normalized Laplacian of Gaussian. After each level the
Gaussian image is down sampled by a factor of 2 or 1/4th the orginal size. See below
for illustration.</p><p class="css-1ek8oqb"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:450px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:72.17391304347827%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdhpUHED/8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIDESISMv/aAAgBAQABBQJzRPlTmUWWXEa8r//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAABEBEhMf/aAAgBAQAGPwJaPTtiHH//xAAbEAEAAgIDAAAAAAAAAAAAAAABABEhMWGRof/aAAgBAQABPyF9HmX0Tm4aOyLT9jIXuKItz//aAAwDAQACAAMAAAAQUA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxAn/8QAGRABAQEBAQEAAAAAAAAAAAAAAREAIUFR/9oACAEBAAE/EJP9J3pmHGziiZnlBEWLgJnH1iSBAXGVVWhv/9k=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image css-0" alt="sift DOG" title="sift DOG" src="/blog/static/c5f5b679e0f21418e9e89e06bd3eb6e6/20e5d/sift-dog.jpg" srcSet="/blog/static/c5f5b679e0f21418e9e89e06bd3eb6e6/8d48c/sift-dog.jpg 345w,/blog/static/c5f5b679e0f21418e9e89e06bd3eb6e6/20e5d/sift-dog.jpg 450w" sizes="(max-width: 450px) 100vw, 450px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
    </span></p><p class="css-1ek8oqb">Once the Difference of Gaussian image pyramid has been computed, the pyramid is
searched for local extrema over scale and space. A point is local in our case when
compared with its 8-connected neighbours, 9 pixels from above and 9 pixels from below.</p><p class="css-1ek8oqb"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:289px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:80.96885813148789%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHuIfOVGh//xAAZEAACAwEAAAAAAAAAAAAAAAAAAREhIjH/2gAIAQEAAQUCLlD4lo//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAEAIhMv/aAAgBAQAGPwIuTwv/xAAaEAACAwEBAAAAAAAAAAAAAAAAAREhMWGB/9oACAEBAAE/IZppO+sTxYMUQ1IzHpimLP/aAAwDAQACAAMAAAAQ0w//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAgMBAQAAAAAAAAAAAAABABEhMUFRYf/aAAgBAQABPxCwCbK8MzS7wblU5V69mYBWuDsZepuQAsL8n//Z&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image css-0" alt="sift local extrema" title="sift local extrema" src="/blog/static/c1dc6bc612b7a3ab0ffb618deeda6df8/b10a4/sift-local-extrema.jpg" srcSet="/blog/static/c1dc6bc612b7a3ab0ffb618deeda6df8/b10a4/sift-local-extrema.jpg 289w" sizes="(max-width: 289px) 100vw, 289px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
    </span></p><h4 id="keypoint-localization" class="css-h7w91b"><a href="#keypoint-localization" aria-label="Keypoint localization" class="css-vvm4x1"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Keypoint localization</h4><p class="css-1ek8oqb">For each keypoint candidate position interpolation is done using Taylor expansion of
the the Difference of Gaussian scale space function with the keypoint as its origin,
we refer to this as D(x).
If the intensity at the candidate extrema is less than the 0.03 threshold value
stated in the David Lowe paper, it is rejected.</p><p class="css-1ek8oqb">Difference of Gaussian often has a high response to edges. In order to increase
stablility, we seek to remove candidate keypoints that have poorly determined
locations but high edge response. </p><p class="css-1ek8oqb">To do this a 2x2 Hessian matrix is used to compute the principal curvature of D(x).
The result are two eigen values lets call them alpha and beta which are proportional
to the principal curvatures of D(x).</p><p class="css-1ek8oqb">Key points with poorly defined peaks in the Difference of Gaussian function have
larger principal curvature across the edge than along it. Thus we can form a ratio
with the alpha and beta eigen values to use as a threshold, in the paper this
threshold value is defined as 10.</p><h4 id="keypoint-orientation" class="css-h7w91b"><a href="#keypoint-orientation" aria-label="Keypoint orientation" class="css-vvm4x1"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Keypoint orientation</h4><p class="css-1ek8oqb">To achieve rotation invariance we must assign the keypoint with a orientation. We
first construct a histogram with 36 bins which covers 360 degrees around our
keypoint, next we calculate the gradient magnitude and direction of the neighboring
pixels and add them to the histogram.</p><p class="css-1ek8oqb">The orientations within 80% of the highest peaks are assigned to the keypoint. For each
additional orientation assigned additional keypoints are created having the same position
and scale as the original keypoint.</p><h4 id="keypoint-descriptor" class="css-h7w91b"><a href="#keypoint-descriptor" aria-label="Keypoint descriptor" class="css-vvm4x1"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Keypoint descriptor</h4><p class="css-1ek8oqb">Now that we have a set of keypoints that are both scale and orientation invariant.
We need to generate unique “signatures” for these keypoints. To produce this
signature we take a 16x16 pixel block around the keypoint. This block is then equally
divided into 4x4 sub-blocks and for each of these 4x4 sub-blocks a 8 bin oreintation
histogram is creaded.</p><p class="css-1ek8oqb">In total this gives us 128 values, which is represented as a vector to form the
unique keypoint descriptor.</p><p class="css-1ek8oqb">The following is an illustration on how keypoint descriptor works. Note that instead
of a 16x16 block, the image shows a 8x8 block divided into 4x4 sub-blocks.</p><p class="css-1ek8oqb"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:741px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:45.21739130434783%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABlElEQVQoz02QW4+bMBSE+f//qPtY9ZLVNlm1KRsIYBvfgm3wDYwTEkjZpqp2dDRP55NmJglzrL34zckWoV2NfhJSmUZP/v5BwzWyUcloTlHTUYmzaaJeL8G92oDiKDCwJNMQdfxrlu4lfmDLsqyuLk6Oxjrjp4CDaGRjnC09S1LOckWaQR0lOijIvQKGfq/y2/yOLfd311MvTXvcH6x3+tajAgh6Yucu2dYoVWXWwEOLUgOh46WnW1YZO15irKqKE6ZvAw9d5/TJqXoUNng39tXAkx8Q5h6/CbiX5bbJ8rY+aLipMymdd+bp09O3z1/sPcKh8bfAo04tstfg5/jmcfJa13gQYtCgo4Wh3Kkmdq8UjnH633mN7WKPCxji2J7dCbOgPY9tkrd8g46FqlMJfskCdGRHy2dcPsh5ntfW3eSFaxmm2ls2SASgVt2aJWknt+PgBZU7Vr6wYoerZ1zUQf5b++9g7cWhsdFzT4LIHJYXq64OhFPyeOJcZDnM8zUDiDE+uI+al5kQwijljGGMKaXzsvwBzgXwAng5xZ8AAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image css-0" alt="keypoint descriptor" title="keypoint descriptor" src="/blog/static/f1777fc33a2c13ef52b271c9dddb373b/13e20/keypoint-desc.png" srcSet="/blog/static/f1777fc33a2c13ef52b271c9dddb373b/e4d6b/keypoint-desc.png 345w,/blog/static/f1777fc33a2c13ef52b271c9dddb373b/1e043/keypoint-desc.png 690w,/blog/static/f1777fc33a2c13ef52b271c9dddb373b/13e20/keypoint-desc.png 741w" sizes="(max-width: 741px) 100vw, 741px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
    </span></p><h2 id="feature-matching-with-flann" class="css-h7w91b"><a href="#feature-matching-with-flann" aria-label="Feature matching with FLANN" class="css-vvm4x1"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Feature matching with FLANN</h2><p class="css-1ek8oqb">Still working on this …</p></section></article></main><style data-emotion-css="1i8tjli">.css-1i8tjli{margin-top:32px;padding-top:16px;}</style><footer class="css-1i8tjli"><style data-emotion-css="1u77lb1">.css-1u77lb1{border-color:var(--theme-ui-colors-muted,hsla(0,0%,0%,0.2));}</style><hr class="css-1u77lb1"/><style data-emotion-css="j6r63x">.css-j6r63x{margin-bottom:32px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><style data-emotion-css="u5xevn">.css-u5xevn{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:32px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-u5xevn"><style data-emotion-css="1emx3y6">.css-1emx3y6{margin-right:8px;margin-bottom:0;width:48px;min-width:48px;border-radius:99999px;}</style><div class="css-1emx3y6 gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:48px;height:48px"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAPoAAAD6AG1e1JrAAADfklEQVQ4yy2UaSusYRjH7/eSMJYwCTH2MAzZ9/XYZixjOQzJvpdtwsjY910TJURSyL5FSZIir7zyEXyJ8/PMuV9Mz/14/td/ua6L+Cud8vLy6urq2trapqYmnrOzs/Pz89va2jIyMuLj47mmpKQkJycnJCREREQ4OTnZ2dkFBweLmpoavktPT29ubq6vr8/KyvLx8XF0dLSxsfH19QUJng94n5aWlpSUxJvIyEiVSsVVVFZWajSavLy8np6ewsJCLy8vMB4eHpS3tramRGpqanFx8R/pAEhMTIyLi0NISUmJaGlpQXBFRcXAwAD3qKgopVIJ3s3NzdnZ2dLSMigoqKysLCcnJzc3NzMzk1rgscBLsbS0NDU1NTY2NjExgYWioqLBwUGqQII8+ClEaY10MI9B8HjR6XRia2trZWVlZmZmcnKyvb2d5+XlZfw3NDSo1Wo/Pz9KIK1AOrhDPPxarRYmsb+/v7Gxsbi4CBj+09PT2dlZTIJEHpFCUlVVxdeIMoPh5+E3sJOTk52dnbW1Ncinp6ff3t4Aw2w2iTdz4NQCgGaioigNi46OFufn53t7eyaTCXKYPz4+Njc3x8fHsU3/KR8aGopyEo6JiaFDJEqE3t7e4eHh4uzsDPD6+vr8/Pzo6Ci1Xl9f9Xo9bSstLYWE8FXSgQrCsLAwvLi4uNja2oqbmxtsb29vHx4ezs3NdXV1vb+/84BtUuW7wMBA2ubv7w+YK7TgFQqFhYWF+Pr6ur+/Pzg4eHp66u7uJpW+vj661djYiGF3d3eUkxAiAwICGCEEYwSwlZWVeH5+vry8NIunJUwoozY8PEzbsBcbGzs0NMQIUA4X9DwkJAQhcrlcJpOJ29vbi4uLu7s7g8EAuKOjgz6TPIT4xDzXhYWFkZGRzs5O+sRLV1dXBwcHe3v737Svrq6ur69pD/H29vaChB9tKF9dXQXM5FAactYOvKen53/w0dERmSGbPzAMaK6rqyNkhhEMnHSRFhIk5PzSQmwjm80Tx8fHDw8PjAoDDDP7bN5ho9EIkoHhF8Fkyeagizkhc9aWsRfM48vLCyUoyXqCZxiYW7aF2IzSgZAR2N3d7e/vJ3nigJxGCJpE4I+Pj6TFevLfgw5jTy8drsw8zJRGEXYorZAOePH9/f3z88MX2P78/EQkTaKKTjqtra3m9aJnDAlLRtRw4hn8Py2SxJ4Rl0RGAAAAAElFTkSuQmCC" alt="David S. Wang" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/blog/static/d2552faa6c8cdf254e63b599f6636099/aff39/avatar.png 1x,
/blog/static/d2552faa6c8cdf254e63b599f6636099/e5b88/avatar.png 1.5x,
/blog/static/d2552faa6c8cdf254e63b599f6636099/88b72/avatar.png 2x" /><img loading="lazy" width="48" height="48" srcset="/blog/static/d2552faa6c8cdf254e63b599f6636099/aff39/avatar.png 1x,
/blog/static/d2552faa6c8cdf254e63b599f6636099/e5b88/avatar.png 1.5x,
/blog/static/d2552faa6c8cdf254e63b599f6636099/88b72/avatar.png 2x" src="/blog/static/d2552faa6c8cdf254e63b599f6636099/aff39/avatar.png" alt="David S. Wang" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="css-0">Hi, my name is David.<br/>This is my blog where I write about my projects and things that interest me.</div></div><style data-emotion-css="11r1i3o">.css-11r1i3o{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;list-style:none;padding:0;}</style><style data-emotion-css="15qbtrw">.css-15qbtrw{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;list-style:none;padding:0;}</style><ul class="css-15qbtrw"><li><a rel="prev" class="css-o7eq5i" href="/blog/seam-carving/">← <!-- -->Content aware image resizing (seam carving)</a></li><li></li></ul></footer></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/image-stitching/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-b3cdf4efa4860a9f5b07.js"],"app":["/app-4056aa1ba738a188367d.js"],"component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js":["/component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js-8c8b83fd421af225f5d7.js"],"component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js":["/component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js-6dba34c92f0c4e81a7bb.js"]};/*]]>*/</script><script src="/blog/polyfill-b3cdf4efa4860a9f5b07.js" nomodule=""></script><script src="/blog/webpack-runtime-65d049c7e0bfd164af7a.js" async=""></script><script src="/blog/framework-dbb498007a7447f28d8e.js" async=""></script><script src="/blog/app-4056aa1ba738a188367d.js" async=""></script><script src="/blog/styles-e9d24b1846c7d6eb9685.js" async=""></script><script src="/blog/777cf710-b8339dbac930299739e2.js" async=""></script><script src="/blog/commons-d5ea4e68f42cb2f584b0.js" async=""></script><script src="/blog/component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js-8c8b83fd421af225f5d7.js" async=""></script></body></html>
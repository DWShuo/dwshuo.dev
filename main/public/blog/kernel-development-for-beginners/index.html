<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/blog/styles.28b715d0c0238008b3e5.css">:root{--reach-skip-nav:1}[data-reach-skip-nav-link]{border:0;clip:rect(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;overflow:hidden;position:absolute}[data-reach-skip-nav-link]:focus{padding:1rem;position:fixed;top:10px;left:10px;background:#fff;z-index:1;width:auto;height:auto;clip:auto}</style><meta name="generator" content="Gatsby 2.24.87"/><title data-react-helmet="true">Kernel development for beginners | [errorcodes@DWS ~]$</title><meta data-react-helmet="true" name="description" content="The goal of this particular post is to walk you through on how to setup up your 
system for linux kernel development. Later on we will go…"/><meta data-react-helmet="true" property="og:title" content="Kernel development for beginners"/><meta data-react-helmet="true" property="og:description" content="The goal of this particular post is to walk you through on how to setup up your 
system for linux kernel development. Later on we will go…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:creator" content="David S. Wang"/><meta data-react-helmet="true" name="twitter:title" content="Kernel development for beginners"/><meta data-react-helmet="true" name="twitter:description" content="The goal of this particular post is to walk you through on how to setup up your 
system for linux kernel development. Later on we will go…"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><link as="script" rel="preload" href="/blog/framework-3e6dec6139dadaa7d0c7.js"/><link as="script" rel="preload" href="/blog/component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js-d134859caf30fdc369b3.js"/><link as="script" rel="preload" href="/blog/commons-c9ecb500d65f850fb38b.js"/><link as="script" rel="preload" href="/blog/app-4e7a3f8b1ba2ef91c1c2.js"/><link as="script" rel="preload" href="/blog/styles-9411612e31e4f14527d1.js"/><link as="script" rel="preload" href="/blog/webpack-runtime-ca152baa18221176750d.js"/><link as="fetch" rel="preload" href="/blog/page-data/kernel-development-for-beginners/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/sq/d/2744905544.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/sq/d/3090755652.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/sq/d/386998304.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/sq/d/764694655.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="15p9t3j">body{--theme-ui-colors-text:var(--theme-ui-colors-text,#282c35);--theme-ui-colors-background:var(--theme-ui-colors-background,#fff);--theme-ui-colors-primary:var(--theme-ui-colors-primary,#007acc);--theme-ui-colors-secondary:var(--theme-ui-colors-secondary,#1B1F23);--theme-ui-colors-muted:var(--theme-ui-colors-muted,hsla(0,0%,0%,0.2));--theme-ui-colors-highlight:var(--theme-ui-colors-highlight,rgba(255,229,100,0.2));--theme-ui-colors-heading:var(--theme-ui-colors-heading,#282c35);--theme-ui-colors-prism-background:var(--theme-ui-colors-prism-background,#011627);--theme-ui-colors-prism-comment:var(--theme-ui-colors-prism-comment,#809393);--theme-ui-colors-prism-string:var(--theme-ui-colors-prism-string,#addb67);--theme-ui-colors-prism-var:var(--theme-ui-colors-prism-var,#d6deeb);--theme-ui-colors-prism-number:var(--theme-ui-colors-prism-number,#f78c6c);--theme-ui-colors-prism-constant:var(--theme-ui-colors-prism-constant,#82aaff);--theme-ui-colors-prism-punctuation:var(--theme-ui-colors-prism-punctuation,#c792ea);--theme-ui-colors-prism-className:var(--theme-ui-colors-prism-className,#ffc98b);--theme-ui-colors-prism-tag:var(--theme-ui-colors-prism-tag,#ffa7c4);--theme-ui-colors-prism-boolean:var(--theme-ui-colors-prism-boolean,#ff5874);--theme-ui-colors-prism-property:var(--theme-ui-colors-prism-property,#80cbc4);--theme-ui-colors-prism-namespace:var(--theme-ui-colors-prism-namespace,#b2ccd6);--theme-ui-colors-prism-highlight:var(--theme-ui-colors-prism-highlight,hsla(207,95%,15%,1));color:var(--theme-ui-colors-text,#282c35);background-color:var(--theme-ui-colors-background,#fff);}body.theme-ui-dark{--theme-ui-colors-text:var(--theme-ui-colors-modes-dark-text,rgba(255,255,255,0.86));--theme-ui-colors-background:var(--theme-ui-colors-modes-dark-background,#232129);--theme-ui-colors-primary:var(--theme-ui-colors-modes-dark-primary,#D9BAE8);--theme-ui-colors-secondary:var(--theme-ui-colors-modes-dark-secondary,rgba(255,255,255,0.86));--theme-ui-colors-muted:var(--theme-ui-colors-modes-dark-muted,hsla(0,0%,100%,0.2));--theme-ui-colors-highlight:var(--theme-ui-colors-modes-dark-highlight,#663399);--theme-ui-colors-heading:var(--theme-ui-colors-modes-dark-heading,#fff);}</style><style data-emotion-css="8ir1vi">*{box-sizing:border-box;}body{margin:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="ocpejr">.css-ocpejr{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;}</style><div class="css-ocpejr"><header><style data-emotion-css="o7eq5i">.css-o7eq5i{color:var(--theme-ui-colors-primary,#007acc);}</style><a class="css-o7eq5i" href="#reach-skip-nav" data-reach-skip-link="" data-reach-skip-nav-link="">Skip to content</a><style data-emotion-css="1ufxd81">.css-1ufxd81{max-width:672px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:32px;}</style><div class="css-1ufxd81"><style data-emotion-css="4c94nt">.css-4c94nt{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:32px;}</style><div class="css-4c94nt"><style data-emotion-css="1qd1r5f">.css-1qd1r5f{margin-top:0;margin-bottom:0;}</style><p class="css-1qd1r5f"><style data-emotion-css="1febbns">.css-1febbns{box-shadow:none;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-primary,#007acc);}</style><style data-emotion-css="1a7e4c0">.css-1a7e4c0{color:var(--theme-ui-colors-primary,#007acc);box-shadow:none;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-primary,#007acc);}</style><a class="css-1a7e4c0" href="/blog/">[errorcodes@DWS ~]$</a></p></div></div></header><div id="reach-skip-nav" data-reach-skip-nav-content=""></div><div><style data-emotion-css="1in33uw">.css-1in33uw{max-width:672px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:32px;padding-bottom:32px;}</style><div class="css-1in33uw"><main><article><header><h1 class="css-0">Kernel development for beginners</h1><style data-emotion-css="1h1xv8c">.css-1h1xv8c{font-size:14px;margin-top:-16px;margin-bottom:16px;}</style><style data-emotion-css="dv5tmu">.css-dv5tmu{font-size:14px;margin-top:-16px;margin-bottom:16px;}.css-dv5tmu code{font-size:inherit;}</style><p class="css-dv5tmu">October 26, 2018</p></header><section><img src="/blog/7b40203c5e11f8d332a809797fbecd32/menuconfig.gif" alt="drawing" width="600" class="css-0"/><style data-emotion-css="1ek8oqb">.css-1ek8oqb code{font-size:inherit;}</style><p class="css-1ek8oqb">The goal of this particular post is to walk you through on how to setup up your
system for linux kernel development. Later on we will go more in depth on topics
such as Kernel data structures, TCP implementation, and even how to write your own
system calls.</p><p class="css-1ek8oqb">Now before we start with the guide, I highly encourge you to download and use a
virtual machine when playing with kernel code, for our purpose either VMware or
VirtualBox will do the Job. </p><style data-emotion-css="h7w91b">.css-h7w91b{pointer-events:painted;}.css-h7w91b a{visibility:hidden;}.css-h7w91b:hover a{visibility:visible;}</style><h2 id="inital-setup" class="css-h7w91b"><style data-emotion-css="vvm4x1">.css-vvm4x1{margin-left:-20px;padding-right:4px;color:var(--theme-ui-colors-primary,#007acc);}</style><a href="#inital-setup" aria-label="Inital setup" class="css-vvm4x1"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Inital setup</h2><p class="css-1ek8oqb">In this guide we will be using the 64-bit version of Ubuntu 18.04, but any distro
should be fine albeit with minor differences. Next we need to download the tarball
containing the kernel source code, you can follow this link to the download page,
I will be using kernel version 4.18.5 through out this guide.</p><p class="css-1ek8oqb">Next up we want to change our grub settings so that we can boot into our fancy
custom kernel later on, to do this spin up a terminal and run</p><style data-emotion-css="f4r2wo">.css-f4r2wo{font-family:Menlo,monospace;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;margin-bottom:8px;color:white;background-color:var(--theme-ui-colors-prism-background,#011627);overflow:auto;border-radius:10px;padding:16px;}.css-f4r2wo .attr-name{font-style:italic;}.css-f4r2wo .comment{color:var(--theme-ui-colors-prism-comment,#809393);}.css-f4r2wo .attr-name,.css-f4r2wo .string,.css-f4r2wo .url{color:var(--theme-ui-colors-prism-string,#addb67);}.css-f4r2wo .variable{color:var(--theme-ui-colors-prism-var,#d6deeb);}.css-f4r2wo .number{color:var(--theme-ui-colors-prism-number,#f78c6c);}.css-f4r2wo .builtin,.css-f4r2wo .char,.css-f4r2wo .constant,.css-f4r2wo .function{color:var(--theme-ui-colors-prism-constant,#82aaff);}.css-f4r2wo .punctuation,.css-f4r2wo .selector,.css-f4r2wo .doctype{color:var(--theme-ui-colors-prism-punctuation,#c792ea);}.css-f4r2wo .class-name{color:var(--theme-ui-colors-prism-className,#ffc98b);}.css-f4r2wo .tag,.css-f4r2wo .operator,.css-f4r2wo .keyword{color:var(--theme-ui-colors-prism-tag,#ffa7c4);}.css-f4r2wo .boolean{color:var(--theme-ui-colors-prism-boolean,#ff5874);}.css-f4r2wo .property{color:var(--theme-ui-colors-prism-property,#80cbc4);}.css-f4r2wo .namespace{color:var(--theme-ui-colors-prism-namespace,#b2ccd6);}.css-f4r2wo .highlight{background:hsla(0,0%,40%,.5);}</style><style data-emotion-css="1q7q4hh">.css-1q7q4hh{font-family:Menlo,monospace;font-size:inherit;}</style><style data-emotion-css="1eu4vb7">.css-1eu4vb7{font-family:Menlo,monospace;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;margin-bottom:8px;color:white;background-color:var(--theme-ui-colors-prism-background,#011627);overflow:auto;border-radius:10px;padding:16px;font-family:Menlo,monospace;font-size:inherit;}.css-1eu4vb7 .attr-name{font-style:italic;}.css-1eu4vb7 .comment{color:var(--theme-ui-colors-prism-comment,#809393);}.css-1eu4vb7 .attr-name,.css-1eu4vb7 .string,.css-1eu4vb7 .url{color:var(--theme-ui-colors-prism-string,#addb67);}.css-1eu4vb7 .variable{color:var(--theme-ui-colors-prism-var,#d6deeb);}.css-1eu4vb7 .number{color:var(--theme-ui-colors-prism-number,#f78c6c);}.css-1eu4vb7 .builtin,.css-1eu4vb7 .char,.css-1eu4vb7 .constant,.css-1eu4vb7 .function{color:var(--theme-ui-colors-prism-constant,#82aaff);}.css-1eu4vb7 .punctuation,.css-1eu4vb7 .selector,.css-1eu4vb7 .doctype{color:var(--theme-ui-colors-prism-punctuation,#c792ea);}.css-1eu4vb7 .class-name{color:var(--theme-ui-colors-prism-className,#ffc98b);}.css-1eu4vb7 .tag,.css-1eu4vb7 .operator,.css-1eu4vb7 .keyword{color:var(--theme-ui-colors-prism-tag,#ffa7c4);}.css-1eu4vb7 .boolean{color:var(--theme-ui-colors-prism-boolean,#ff5874);}.css-1eu4vb7 .property{color:var(--theme-ui-colors-prism-property,#80cbc4);}.css-1eu4vb7 .namespace{color:var(--theme-ui-colors-prism-namespace,#b2ccd6);}.css-1eu4vb7 .highlight{background:hsla(0,0%,40%,.5);}</style><pre class="prism-code language-css-1q7q4hh css-1eu4vb7"><div class="token-line"><span class="token plain">sudo vim /etc/default/grub</span></div></pre><p class="css-1ek8oqb">and change these two lines to read</p><pre class="prism-code language-css-1q7q4hh css-1eu4vb7"><div class="token-line"><span class="token plain">GRUB_TIMEOUT = -1</span></div><div class="token-line"><span class="token plain">GRUB_TIMEOUT_STYLE = menu</span></div></pre><p class="css-1ek8oqb">save and exit, then apply our changes by running,</p><pre class="prism-code language-css-1q7q4hh css-1eu4vb7"><div class="token-line"><span class="token plain">sudo update-grub</span></div></pre><p class="css-1ek8oqb">Next up run </p><pre class="prism-code language-css-1q7q4hh css-1eu4vb7"><div class="token-line"><span class="token plain">sudo software-properties-gtk</span></div></pre><p class="css-1ek8oqb">check the box that says <style data-emotion-css="1pnz7gf">.css-1pnz7gf{border-radius:0.3em;color:var(--theme-ui-colors-secondary,#1B1F23);background-color:var(--theme-ui-colors-highlight,rgba(255,229,100,0.2));padding-top:0.15em;padding-bottom:0.05em;padding-left:0.2em;padding-right:0.2em;}</style><code class="css-1pnz7gf">source code</code>, then click close. A warning will popup
nagging you about out of date software, we can simply ignore it and click reload.</p><p class="css-1ek8oqb">Now assuming that you saved the tarball that we previously downloaded in
<code class="css-1pnz7gf">~/Download</code> we run the following commands to set up our workspace.</p><pre class="prism-code language-css-1q7q4hh css-1eu4vb7"><div class="token-line"><span class="token plain">mkdir kernelSource</span></div><div class="token-line"><span class="token plain">cd kernelSource</span></div><div class="token-line"><span class="token plain">mv ~/Downloads/linux-4.18.5.tar.xz .</span></div><div class="token-line"><span class="token plain">tar -xf linux-4.18.5.tar.xz</span></div></pre><p class="css-1ek8oqb">If you are like me and can’t remember tar flags to save your life, dont sweat my
friend Arnold is here to help.
<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:734px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:96.231884057971%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsSAAALEgHS3X78AAACuElEQVQ4y3WUS0uqURSG/Q0O/An2F0ppHoRQTQy7UUGTKNCQQHQiDVJqYKOgIKgGFUVlmcSJMhGV0lBLyTgVFN21+/2iPbjjO+o5Zw22rrX3u9Z63732J8tkMtls9ubmZnFxMRKJbG1t7e7ubmxs+P3+YDC4vr6+t7f3/Px8fX3NMQ6/v79ncoYr+/r64mdtba21tbW9vb2qqkqr1VZWVmo0mpaWFla9Xu9wOGpra41G48jISHd3t8ViyeZMJnJcXFywsbm56Xa7JyYmPB6PyWRqaGior6/v6ekhwu7s7OzU1BS5Jicnf8DZQhO50ul0Y2Oj2WymTk1NDZ0TFD1+fn5Kh2UShijrx8cH7v7+fltbG5hUKkXzo6OjBAVbKcs/Kgtj2+l0jo+PHxwcoBwS5mOKK+fDRPFEIgFPkKenpwImdfdfsNg7Pj4eHBy02+1os7KygmB3d3d/NygrglGwr69PrVYPDAxQFpeL0Ol0TU1NNpttfn7+5eVFOizLR97f35eWlsrl8pKSEgaGCOOBTh0dHSqVSqlUKhSKpaUlSfMC8Pn5OeNRXV3NnBweHhJ8enoizpBwYQxMWVnZwsKCJF5x29Dr7+8XEavVury83NXVNTc3h4uQ+WoVgNlbXV1lQisqKrjneDze3Nw8PT1dV1fncrnC4TCyX15eMj9wKQYLGkdHR7FYbGdnB6mgh0g+n+/h4QH39vb26uqKsXl8fCyeMFaejiAp3GQy2dvby2tjVGI5oyPpzv+AkZRX0dnZKUTGqGMwGOBcXl4ejUbf3t5IzVrAWeSgn5mZGbShSfChUCgQCPAGx8bGuPbt7W2v13tyckLPnIQ5qX8qw/b19ZU/bA8PD0MY8NDQEFn4GECEayP4O2d8NkiBCj9g+qEgY8ghhKUI3wbG61fOhMtFsEKeAmdnZ0Lwb1SXrUEcrHcGAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image css-0" alt="Arnold Meme" title="Arnold Meme" src="/blog/static/c6ad25bb20076f1ac3f76a4681e95db2/c6d67/tar_com.png" srcSet="/blog/static/c6ad25bb20076f1ac3f76a4681e95db2/e4d6b/tar_com.png 345w,/blog/static/c6ad25bb20076f1ac3f76a4681e95db2/1e043/tar_com.png 690w,/blog/static/c6ad25bb20076f1ac3f76a4681e95db2/c6d67/tar_com.png 734w" sizes="(max-width: 734px) 100vw, 734px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
    </span>
Next we can delete the tarball and make two copies of the extracted files, one for
development and one for storing the original.</p><pre class="prism-code language-css-1q7q4hh css-1eu4vb7"><div class="token-line"><span class="token plain">rm linux-4.18.5.tar.xz</span></div><div class="token-line"><span class="token plain">mv linux-4.18.5 linux-4.18.5-original</span></div><div class="token-line"><span class="token plain">cp -r linux-4.18.5-original linux-4.18.5-dev</span></div></pre><p class="css-1ek8oqb">Now we need to download some extra package for our build tools</p><pre class="prism-code language-css-1q7q4hh css-1eu4vb7"><div class="token-line"><span class="token plain">sudo apt-get build-dep linux-image-$(uname -r)</span></div></pre><p class="css-1ek8oqb">We also need to download some dependencies required for menuconfig. menuconfig is a
ncurses based graphical tool allowing us to configure kernel settings, this is
highly recommended unless you want edit the setting through a text file.</p><pre class="prism-code language-css-1q7q4hh css-1eu4vb7"><div class="token-line"><span class="token plain">sudo apt-get install libncurses5-dev bison pkg-config flex libelf-dev libssl-dev</span></div></pre><h2 id="configuring-the-kernel" class="css-h7w91b"><a href="#configuring-the-kernel" aria-label="Configuring the kernel" class="css-vvm4x1"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuring the kernel</h2><p class="css-1ek8oqb">Now that we have everything installed, we can configure the kernel using menuconfig,
but first we need to copy our config file from boot into our development directory</p><pre class="prism-code language-css-1q7q4hh css-1eu4vb7"><div class="token-line"><span class="token plain">cd linux-4.18.5-dev</span></div><div class="token-line"><span class="token plain">cp /boot/config-$(uname -r) .config</span></div></pre><p class="css-1ek8oqb">next we need to remove the module sig key in the config file, if you are intrested in
what sig keys do, you can read about it <a href="https://wiki.gentoo.org/wiki/Signed_kernel_module_support" class="css-o7eq5i">here</a>.</p><pre class="prism-code language-css-1q7q4hh css-1eu4vb7"><div class="token-line"><span class="token plain">sudo vim .config</span></div></pre><p class="css-1ek8oqb">find the line that reads <code class="css-1pnz7gf">CONFIG_MODULE_SIG_KEY =</code> and remove everthing behind the
equals sign on that line.</p><img src="/blog/48094aa79c0d594b65285dc7cb8fc468/sig_key.gif" alt="drawing" width="600" class="css-0"/><p class="css-1ek8oqb">One last thing before we run menuconfig, we need to streamline our config file</p><pre class="prism-code language-css-1q7q4hh css-1eu4vb7"><div class="token-line"><span class="token plain">./scripts/kconfig/streamline_config.pl &gt; ../config.streamlined</span></div></pre><p class="css-1ek8oqb">This little magical script allows us to cut down our kernel build time. It does this
by calling lsmod to find all modules running on the current system, it then reads
all makefiles to map which config enables which module, followed by reading the
Kconfig files to find the dependencies and selects that may be needed to support a
config, finally it reads the config file and removes any modules that is not needed
to enable the currently loaded modules.</p><p class="css-1ek8oqb">now we just need to clean up a little and move our config file back to our working
directory</p><pre class="prism-code language-css-1q7q4hh css-1eu4vb7"><div class="token-line"><span class="token plain">make mrproper</span></div><div class="token-line"><span class="token plain">cp ../config.streamlined .config</span></div></pre><p class="css-1ek8oqb">To launch menuconfig run</p><pre class="prism-code language-css-1q7q4hh css-1eu4vb7"><div class="token-line"><span class="token plain">make menuconfig</span></div></pre><p class="css-1ek8oqb">navigate with the arrow keys to <code class="css-1pnz7gf">Device drivers-&gt;Graphics support-&gt;Bootup logo</code>
enable this setting with Y, save and exit. Bootup logo support is needed or else
when grub tries to use <code class="css-1pnz7gf">Plymouth/quite/splash</code> boot options you will get garbled
screens. </p><img src="/blog/7b40203c5e11f8d332a809797fbecd32/menuconfig.gif" alt="drawing" width="600" class="css-0"/><h2 id="building-and-installing-the-kernel" class="css-h7w91b"><a href="#building-and-installing-the-kernel" aria-label="Building and installing the kernel" class="css-vvm4x1"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Building and installing the kernel</h2><p class="css-1ek8oqb">Lets make some changes to our kernel, compile it and then install it. For now we
will do somthing easy like changing kernel EXTRAVERSION number.</p><p class="css-1ek8oqb">To do this we move to our development directory and edit our Makefile, under
<code class="css-1pnz7gf">EXTRAVERSION=</code> we can add our own versioning information I decided to go with my
name <code class="css-1pnz7gf">EXTRAVERSION=-David</code></p><p class="css-1ek8oqb">Once you are satisfied with your extraversion name its time to build your kernel, run
the command</p><pre class="prism-code language-css-1q7q4hh css-1eu4vb7"><div class="token-line"><span class="token plain">make</span></div></pre><p class="css-1ek8oqb">This step could take from 20 to 40 minutes depending on your computer, so go ahead
and grab yourself some coffee, turn on your favorite TV show, check out some of my
other posts and come back in  about half an hour.</p><p class="css-1ek8oqb">Ok, hopefully it didn’t more than 30 mins, now assuming your build ran without error,
you can now run</p><pre class="prism-code language-css-1q7q4hh css-1eu4vb7"><div class="token-line"><span class="token plain">sudo make modules_install</span></div><div class="token-line"><span class="token plain">sudo make install</span></div></pre><p class="css-1ek8oqb">which will create the initramfs and invoke update-grub all in one command.</p><p class="css-1ek8oqb">Congratulations!! you have now built and installed your very own kernel. Now we just
need to reboot, and select the new kernel under “Advanced Options”.</p><img src="/blog/1bda6a7225b5742d0b7effadcd7bc3dc/demo.gif" alt="drawing" width="600" class="css-0"/><p class="css-1ek8oqb">Once Ubuntu has been booted you can check your kernel version by typing <code class="css-1pnz7gf">uname -r</code>
into the terminal. you should see <code class="css-1pnz7gf">4.18.5-David</code> or what ever you choose for your
extraversion name. </p></section></article></main><style data-emotion-css="1i8tjli">.css-1i8tjli{margin-top:32px;padding-top:16px;}</style><footer class="css-1i8tjli"><style data-emotion-css="1u77lb1">.css-1u77lb1{border-color:var(--theme-ui-colors-muted,hsla(0,0%,0%,0.2));}</style><hr class="css-1u77lb1"/><style data-emotion-css="j6r63x">.css-j6r63x{margin-bottom:32px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><style data-emotion-css="u5xevn">.css-u5xevn{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:32px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-u5xevn"><style data-emotion-css="1emx3y6">.css-1emx3y6{margin-right:8px;margin-bottom:0;width:48px;min-width:48px;border-radius:99999px;}</style><div class="css-1emx3y6 gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:48px;height:48px"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAPoAAAD6AG1e1JrAAADfklEQVQ4yy2UaSusYRjH7/eSMJYwCTH2MAzZ9/XYZixjOQzJvpdtwsjY910TJURSyL5FSZIir7zyEXyJ8/PMuV9Mz/14/td/ua6L+Cud8vLy6urq2trapqYmnrOzs/Pz89va2jIyMuLj47mmpKQkJycnJCREREQ4OTnZ2dkFBweLmpoavktPT29ubq6vr8/KyvLx8XF0dLSxsfH19QUJng94n5aWlpSUxJvIyEiVSsVVVFZWajSavLy8np6ewsJCLy8vMB4eHpS3tramRGpqanFx8R/pAEhMTIyLi0NISUmJaGlpQXBFRcXAwAD3qKgopVIJ3s3NzdnZ2dLSMigoqKysLCcnJzc3NzMzk1rgscBLsbS0NDU1NTY2NjExgYWioqLBwUGqQII8+ClEaY10MI9B8HjR6XRia2trZWVlZmZmcnKyvb2d5+XlZfw3NDSo1Wo/Pz9KIK1AOrhDPPxarRYmsb+/v7Gxsbi4CBj+09PT2dlZTIJEHpFCUlVVxdeIMoPh5+E3sJOTk52dnbW1Ncinp6ff3t4Aw2w2iTdz4NQCgGaioigNi46OFufn53t7eyaTCXKYPz4+Njc3x8fHsU3/KR8aGopyEo6JiaFDJEqE3t7e4eHh4uzsDPD6+vr8/Pzo6Ci1Xl9f9Xo9bSstLYWE8FXSgQrCsLAwvLi4uNja2oqbmxtsb29vHx4ezs3NdXV1vb+/84BtUuW7wMBA2ubv7w+YK7TgFQqFhYWF+Pr6ur+/Pzg4eHp66u7uJpW+vj661djYiGF3d3eUkxAiAwICGCEEYwSwlZWVeH5+vry8NIunJUwoozY8PEzbsBcbGzs0NMQIUA4X9DwkJAQhcrlcJpOJ29vbi4uLu7s7g8EAuKOjgz6TPIT4xDzXhYWFkZGRzs5O+sRLV1dXBwcHe3v737Svrq6ur69pD/H29vaChB9tKF9dXQXM5FAactYOvKen53/w0dERmSGbPzAMaK6rqyNkhhEMnHSRFhIk5PzSQmwjm80Tx8fHDw8PjAoDDDP7bN5ho9EIkoHhF8Fkyeagizkhc9aWsRfM48vLCyUoyXqCZxiYW7aF2IzSgZAR2N3d7e/vJ3nigJxGCJpE4I+Pj6TFevLfgw5jTy8drsw8zJRGEXYorZAOePH9/f3z88MX2P78/EQkTaKKTjqtra3m9aJnDAlLRtRw4hn8Py2SxJ4Rl0RGAAAAAElFTkSuQmCC" alt="David S. Wang" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/blog/static/d2552faa6c8cdf254e63b599f6636099/aff39/avatar.png 1x,
/blog/static/d2552faa6c8cdf254e63b599f6636099/e5b88/avatar.png 1.5x,
/blog/static/d2552faa6c8cdf254e63b599f6636099/88b72/avatar.png 2x" /><img loading="lazy" width="48" height="48" srcset="/blog/static/d2552faa6c8cdf254e63b599f6636099/aff39/avatar.png 1x,
/blog/static/d2552faa6c8cdf254e63b599f6636099/e5b88/avatar.png 1.5x,
/blog/static/d2552faa6c8cdf254e63b599f6636099/88b72/avatar.png 2x" src="/blog/static/d2552faa6c8cdf254e63b599f6636099/aff39/avatar.png" alt="David S. Wang" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="css-0">Hi, my name is David.<br/>This is my blog where i write about my projects and things that intrest me.</div></div><style data-emotion-css="11r1i3o">.css-11r1i3o{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;list-style:none;padding:0;}</style><style data-emotion-css="15qbtrw">.css-15qbtrw{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;list-style:none;padding:0;}</style><ul class="css-15qbtrw"><li><a rel="prev" class="css-o7eq5i" href="/blog/parts-of-speech-tagger/">← <!-- -->Parts of speech tagger</a></li><li><a rel="next" class="css-o7eq5i" href="/blog/wardrobeOS/">wardrobeOS<!-- --> →</a></li></ul></footer></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/kernel-development-for-beginners/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-bd2fd6b0d1e6c7840162.js"],"app":["/app-4e7a3f8b1ba2ef91c1c2.js"],"component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js":["/component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js-d134859caf30fdc369b3.js"],"component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js":["/component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js-371b121e334e6301face.js"]};/*]]>*/</script><script src="/blog/polyfill-bd2fd6b0d1e6c7840162.js" nomodule=""></script><script src="/blog/webpack-runtime-ca152baa18221176750d.js" async=""></script><script src="/blog/styles-9411612e31e4f14527d1.js" async=""></script><script src="/blog/app-4e7a3f8b1ba2ef91c1c2.js" async=""></script><script src="/blog/commons-c9ecb500d65f850fb38b.js" async=""></script><script src="/blog/component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js-d134859caf30fdc369b3.js" async=""></script><script src="/blog/framework-3e6dec6139dadaa7d0c7.js" async=""></script></body></html>